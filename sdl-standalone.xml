<blocks app="Snap! 6, https://snap.berkeley.edu" version="1"><block-definition s="when %&apos;SDL signal&apos; is_____________________ %&apos;signal&apos; %&apos;action&apos;" type="command" category="control"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input><input type="%cmdRing"></input></inputs><script><block s="doDeclareVariables"><list><l>sdlSignal</l></list></block><block s="doIf"><block s="reportAnd"><block s="reportEquals"><block var="SDL signal"/><block var="signal"/></block><block s="reportEquals"><block var="SDL transition ended"/><l>0</l></block></block><script><block s="doSetVar"><l>SDL transition ended</l><l>1</l></block><block s="doSetVar"><l>sdlSignal</l><block s="reportListItem"><l>1</l><block var="SDL signal input queue"/></block></block><block s="doDeleteFromList"><l>1</l><block var="SDL signal input queue"/></block><block s="doRun"><block var="action"/><list><custom-block s="JSON %s get %s"><block var="sdlSignal"/><l>param</l></custom-block></list></block></script></block></script></block-definition><block-definition s="SDL start" type="command" category="control"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doWait"><l>0</l></block><custom-block s="create %s var %mult%txt"><l>sprite</l><list><l>SDL signal input queue</l></list></custom-block><block s="doSetVar"><l>SDL signal input queue</l><block s="reportNewList"><list></list></block></block><custom-block s="create %s var %mult%txt"><l>sprite</l><list><l>SDL state</l></list></custom-block><custom-block s="create %s var %mult%txt"><l>sprite</l><list><l>SDL transition ended</l></list></custom-block></script></block-definition><block-definition s="SDL next signal" type="command" category="control"><header></header><code></code><translations></translations><inputs></inputs></block-definition><block-definition s="SDL next signal from input queue" type="reporter" category="control"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="value at key %s of %l"><l>signal</l><custom-block s="listify %mlt"><block s="reportListItem"><l>1</l><block var="SDL signal input queue"/></block></custom-block></custom-block></block></script></block-definition><block-definition s="SDL next json signal from input queue" type="reporter" category="control"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="SDL signal input queue"/></block></block></script></block-definition><block-definition s="JSON %&apos;json&apos; get %&apos;attr&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>json</l><l>attr</l></list><l>let jsp = JSON.parse(json);&#xD;return eval(&apos;jsp.&apos; + attr);</l></block><list><block var="json"/><block var="attr"/></list></block></block></script></block-definition><block-definition s="when SDL state is________________________ %&apos;state&apos; %&apos;actions&apos;" type="command" category="variables"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%cmdRing"></input></inputs><script><block s="doDeclareVariables"><list><l>signal</l></list></block><block s="doIf"><block s="reportGreaterThan"><block s="reportListAttribute"><l><option>length</option></l><block var="SDL signal input queue"/></block><l>0</l></block><script><block s="doIf"><block s="reportEquals"><block var="SDL state"/><block var="state"/></block><script><block s="doRun"><block var="actions"/><list><custom-block s="SDL next signal from input queue"></custom-block></list></block></script></block></script></block></script></block-definition><block-definition s="SDL set state _________________ %&apos;state&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><custom-block s="repeat while %boolUE %cs"><block s="reportGreaterThan"><block s="reportListAttribute"><l><option>length</option></l><block var="SDL signal input queue"/></block><l>0</l></block><script><block s="doSend"><l>SDL signal</l><block s="reportGet"><l><option>name</option></l></block></block><block s="doDeleteFromList"><l>1</l><block var="SDL signal input queue"/></block></script></custom-block><block s="doSetVar"><l>SDL state</l><block var="state"/></block></script></block-definition><block-definition s="SDL send signal %&apos;signal&apos; to %&apos;agent&apos; delay %&apos;delay&apos; param %&apos;param&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input><input type="%s">0</input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>jsonSignal</l></list></block><block s="doSetVar"><l>jsonSignal</l><block s="reportJoinWords"><list><l>{"from":"</l><block s="reportGet"><l><option>name</option></l></block><l>","to":"</l><block var="agent"/><l>","signal":"</l><block var="signal"/><l>","param":"</l><block var="param"/><l>"}</l></list></block></block><block s="fork"><block s="reifyScript"><script><block s="doWait"><block var="delay"/></block><block s="doTellTo"><block var="agent"/><block s="reifyScript"><script><block s="doAddToList"><block var="jsonSignal"/><block var="SDL signal input queue"/></block><block s="doSetVar"><l>SDL transition ended</l><l>0</l></block></script><list></list></block><list></list></block><block s="doSend"><l>SDL signal</l><block var="agent"/></block></script><list><l>agent</l></list></block><list><block var="agent"/></list></block></script></block-definition></blocks>